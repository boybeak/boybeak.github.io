---
title: 相机录像新姿势-OpenGL共享上下文+MediaCodec
date: 2023-11-20 22:43:00
categories: Android技巧
tags:
- Android
- Camera
---

## 一、前言
承接上一文章[Camera无变形任意尺寸预览](https://boybeak.github.io/2023/11/12/2023-11-12-Camera%E6%97%A0%E5%8F%98%E5%BD%A2%E4%BB%BB%E6%84%8F%E5%B0%BA%E5%AF%B8%E9%A2%84%E8%A7%88/)，我们已经实现了无形变的任意尺寸的相机画面预览。接下来要完成相机的相关录像、拍照、扫码等功能，最重要也是最难的就是录像部分。

## 二、技术要求
我们要实现的录像功能技术要求如下：
1. 所见即所得，预览画面什么样，最终结果就是什么样，不能经过二次裁剪与变换；
2. 允许过程中，切换摄像头而不中断相关操作；
3. 效率尽可能高，不许按下停止键后，有长时间的等待最终结果的过程；
4. 不要引入额外的库；

## 三、基本思路
