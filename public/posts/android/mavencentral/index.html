<!DOCTYPE html>






































<html
  class="not-ready text-sm lg:text-base"
  style="--bg: #faf6f1"
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>发布Android库到MavenCentral教程 - My New Hugo Site</title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="发布Android库到MavenCentral教程 JCenter已经宣布，即将在2020年5月1日，停止新的库的提交，在2022年2月21号以前，连库的解析服务也停止，所以，把以前的库或者未来的新库替换到MavenCentral是当务之急了。
我参考的教程来自以下两篇文章：
Publishing your first Android library to MavenCentral
Android库发布到Maven Central全攻略
Demo项目地址：
EasyPack
建议英文能力强的直接第一篇，我是在第二篇遇到问题时候，找到了第一篇文章解决了问题，因为第二篇里用的windows环境，我用的mac环境。
一、 Sonatype Jira相关设置 首先，先去Sonatype Jira这个地址注册一个SonatypeJira的账号；
其次，账号创建后，登录，然后在这个页面https://issues.sonatype.org/projects 点击Create创建一个issue，如下图：
这里group id最好使用你的github地址，这样比较容易验证，如果你想用自己单独的域名，需要做更多的操作。很繁琐，不建议这样做。
创建以后，会有管理员处理你的这个issue，等待管理员回复你的issue，他会告诉你，要在你的github创建一个repo，repo的名字是这个issue的id，比如我的是OSSRH-66052。管理员回复我的如下图：
你创建好repo后，回复管理员就好了，等待这个issue的状态变成RESOLVED状态。
这样，你就创建好了一个issue，用来承接对应group id下所有的库。
二、Gradle的准备 在你项目根目录下的build.gradle文件添加classpath。
buildscript { ext { kotlin_version = &#34;1.4.31&#34; appcompat = &#34;1.2.0&#34; dokka_version = &#39;1.4.10.2&#39; } repositories { google() mavenCentral() } dependencies { classpath &#39;com.android.tools.build:gradle:4.1.3&#39; classpath &#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34; classpath &#34;org.jetbrains.dokka:dokka-gradle-plugin:$dokka_version&#34; //新添加的这一classpath } } 在你要提交的module下的build.gradle文件中，尾部追加如下代码：
ext { PUBLISH_ARTIFACT_ID = &#34;你的artifact_id，一般是module的名字&#34; } apply from: &#39;../publish.gradle&#39; 在根目录下创建publish." />
  <meta name="author" content="" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://boybeak.github.io/main.min.css" />

  

  
  
  
    
  
  <link
    rel="preload"
    as="image"
    href="https://boybeak.github.io/theme.png"
  />

  
  
  
  <link rel="preload" as="image" href="https://www.gravatar.com/avatar/6fd8df4abe41f17fd8e2dd7d97b5cc8c?s=160&amp;d=identicon" />
  
  

  
  <link rel="preload" as="image" href="https://boybeak.github.io/twitter.svg" />
  
  <link rel="preload" as="image" href="https://boybeak.github.io/github.svg" />
  
  <link rel="preload" as="image" href="https://boybeak.github.io/instagram.svg" />
  
  <link rel="preload" as="image" href="https://boybeak.github.io/rss.svg" />
  

  
  <link rel="icon" href="https://boybeak.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://boybeak.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.101.0" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="发布Android库到MavenCentral教程" />
<meta property="og:description" content="发布Android库到MavenCentral教程 JCenter已经宣布，即将在2020年5月1日，停止新的库的提交，在2022年2月21号以前，连库的解析服务也停止，所以，把以前的库或者未来的新库替换到MavenCentral是当务之急了。
我参考的教程来自以下两篇文章：
Publishing your first Android library to MavenCentral
Android库发布到Maven Central全攻略
Demo项目地址：
EasyPack
建议英文能力强的直接第一篇，我是在第二篇遇到问题时候，找到了第一篇文章解决了问题，因为第二篇里用的windows环境，我用的mac环境。
一、 Sonatype Jira相关设置 首先，先去Sonatype Jira这个地址注册一个SonatypeJira的账号；
其次，账号创建后，登录，然后在这个页面https://issues.sonatype.org/projects 点击Create创建一个issue，如下图：
这里group id最好使用你的github地址，这样比较容易验证，如果你想用自己单独的域名，需要做更多的操作。很繁琐，不建议这样做。
创建以后，会有管理员处理你的这个issue，等待管理员回复你的issue，他会告诉你，要在你的github创建一个repo，repo的名字是这个issue的id，比如我的是OSSRH-66052。管理员回复我的如下图：
你创建好repo后，回复管理员就好了，等待这个issue的状态变成RESOLVED状态。
这样，你就创建好了一个issue，用来承接对应group id下所有的库。
二、Gradle的准备 在你项目根目录下的build.gradle文件添加classpath。
buildscript { ext { kotlin_version = &#34;1.4.31&#34; appcompat = &#34;1.2.0&#34; dokka_version = &#39;1.4.10.2&#39; } repositories { google() mavenCentral() } dependencies { classpath &#39;com.android.tools.build:gradle:4.1.3&#39; classpath &#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34; classpath &#34;org.jetbrains.dokka:dokka-gradle-plugin:$dokka_version&#34; //新添加的这一classpath } } 在你要提交的module下的build.gradle文件中，尾部追加如下代码：
ext { PUBLISH_ARTIFACT_ID = &#34;你的artifact_id，一般是module的名字&#34; } apply from: &#39;../publish.gradle&#39; 在根目录下创建publish." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://boybeak.github.io/posts/android/mavencentral/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-03T21:03:05+08:00" />
<meta property="article:modified_time" content="2022-09-03T21:03:05+08:00" />


  
  <meta itemprop="name" content="发布Android库到MavenCentral教程">
<meta itemprop="description" content="发布Android库到MavenCentral教程 JCenter已经宣布，即将在2020年5月1日，停止新的库的提交，在2022年2月21号以前，连库的解析服务也停止，所以，把以前的库或者未来的新库替换到MavenCentral是当务之急了。
我参考的教程来自以下两篇文章：
Publishing your first Android library to MavenCentral
Android库发布到Maven Central全攻略
Demo项目地址：
EasyPack
建议英文能力强的直接第一篇，我是在第二篇遇到问题时候，找到了第一篇文章解决了问题，因为第二篇里用的windows环境，我用的mac环境。
一、 Sonatype Jira相关设置 首先，先去Sonatype Jira这个地址注册一个SonatypeJira的账号；
其次，账号创建后，登录，然后在这个页面https://issues.sonatype.org/projects 点击Create创建一个issue，如下图：
这里group id最好使用你的github地址，这样比较容易验证，如果你想用自己单独的域名，需要做更多的操作。很繁琐，不建议这样做。
创建以后，会有管理员处理你的这个issue，等待管理员回复你的issue，他会告诉你，要在你的github创建一个repo，repo的名字是这个issue的id，比如我的是OSSRH-66052。管理员回复我的如下图：
你创建好repo后，回复管理员就好了，等待这个issue的状态变成RESOLVED状态。
这样，你就创建好了一个issue，用来承接对应group id下所有的库。
二、Gradle的准备 在你项目根目录下的build.gradle文件添加classpath。
buildscript { ext { kotlin_version = &#34;1.4.31&#34; appcompat = &#34;1.2.0&#34; dokka_version = &#39;1.4.10.2&#39; } repositories { google() mavenCentral() } dependencies { classpath &#39;com.android.tools.build:gradle:4.1.3&#39; classpath &#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34; classpath &#34;org.jetbrains.dokka:dokka-gradle-plugin:$dokka_version&#34; //新添加的这一classpath } } 在你要提交的module下的build.gradle文件中，尾部追加如下代码：
ext { PUBLISH_ARTIFACT_ID = &#34;你的artifact_id，一般是module的名字&#34; } apply from: &#39;../publish.gradle&#39; 在根目录下创建publish."><meta itemprop="datePublished" content="2022-09-03T21:03:05+08:00" />
<meta itemprop="dateModified" content="2022-09-03T21:03:05+08:00" />
<meta itemprop="wordCount" content="485">
<meta itemprop="keywords" content="untagged," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="发布Android库到MavenCentral教程"/>
<meta name="twitter:description" content="发布Android库到MavenCentral教程 JCenter已经宣布，即将在2020年5月1日，停止新的库的提交，在2022年2月21号以前，连库的解析服务也停止，所以，把以前的库或者未来的新库替换到MavenCentral是当务之急了。
我参考的教程来自以下两篇文章：
Publishing your first Android library to MavenCentral
Android库发布到Maven Central全攻略
Demo项目地址：
EasyPack
建议英文能力强的直接第一篇，我是在第二篇遇到问题时候，找到了第一篇文章解决了问题，因为第二篇里用的windows环境，我用的mac环境。
一、 Sonatype Jira相关设置 首先，先去Sonatype Jira这个地址注册一个SonatypeJira的账号；
其次，账号创建后，登录，然后在这个页面https://issues.sonatype.org/projects 点击Create创建一个issue，如下图：
这里group id最好使用你的github地址，这样比较容易验证，如果你想用自己单独的域名，需要做更多的操作。很繁琐，不建议这样做。
创建以后，会有管理员处理你的这个issue，等待管理员回复你的issue，他会告诉你，要在你的github创建一个repo，repo的名字是这个issue的id，比如我的是OSSRH-66052。管理员回复我的如下图：
你创建好repo后，回复管理员就好了，等待这个issue的状态变成RESOLVED状态。
这样，你就创建好了一个issue，用来承接对应group id下所有的库。
二、Gradle的准备 在你项目根目录下的build.gradle文件添加classpath。
buildscript { ext { kotlin_version = &#34;1.4.31&#34; appcompat = &#34;1.2.0&#34; dokka_version = &#39;1.4.10.2&#39; } repositories { google() mavenCentral() } dependencies { classpath &#39;com.android.tools.build:gradle:4.1.3&#39; classpath &#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34; classpath &#34;org.jetbrains.dokka:dokka-gradle-plugin:$dokka_version&#34; //新添加的这一classpath } } 在你要提交的module下的build.gradle文件中，尾部追加如下代码：
ext { PUBLISH_ARTIFACT_ID = &#34;你的artifact_id，一般是module的名字&#34; } apply from: &#39;../publish.gradle&#39; 在根目录下创建publish."/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href="https://boybeak.github.io/"
      >My New Hugo Site</a
    >
    <a
      class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
    ></a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  
  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = `"#faf6f1"`.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const darkVal = localStorage.getItem('dark');
    setDark(darkVal ? darkVal === 'true' : darkScheme.matches);

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href=" https://twitter.com/YOUR_TWITTER_ID "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href=" https://github.com/YOUR_GITHUB_ID "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./instagram.svg)"
        href=" https://instagram.com/YOUR_INSTAGRAM_ID "
        target="_blank"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./rss.svg)"
        href=" https://boybeak.github.io/index.xml "
        target="_blank"
      ></a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"
    >
      

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">发布Android库到MavenCentral教程</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Sep 3, 2022</time>
      
      
    </div>
    
  </header>

  <section><h1 id="发布android库到mavencentral教程">发布Android库到MavenCentral教程</h1>
<p>JCenter已经宣布，即将在2020年5月1日，停止新的库的提交，在2022年2月21号以前，连库的解析服务也停止，所以，把以前的库或者未来的新库替换到MavenCentral是当务之急了。</p>
<p>我参考的教程来自以下两篇文章：</p>
<p><a href="https://proandroiddev.com/publishing-your-first-android-library-to-mavencentral-be2c51330b88">Publishing your first Android library to MavenCentral</a></p>
<p><a href="https://xiaozhuanlan.com/topic/6174835029">Android库发布到Maven Central全攻略</a></p>
<p>Demo项目地址：</p>
<p><a href="https://github.com/boybeak/EasyPack">EasyPack</a></p>
<p>建议英文能力强的直接第一篇，我是在第二篇遇到问题时候，找到了第一篇文章解决了问题，因为第二篇里用的windows环境，我用的mac环境。</p>
<h2 id="一-sonatype-jirahttpsissuessonatypeorg相关设置">一、 <a href="https://issues.sonatype.org/">Sonatype Jira</a>相关设置</h2>
<p>首先，先去<a href="https://issues.sonatype.org/">Sonatype Jira</a>这个地址注册一个SonatypeJira的账号；</p>
<p>其次，账号创建后，登录，然后在这个页面https://issues.sonatype.org/projects 点击Create创建一个issue，如下图：</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_create.jpg" alt="create"></p>
<blockquote>
<p>这里group id最好使用你的github地址，这样比较容易验证，如果你想用自己单独的域名，需要做更多的操作。很繁琐，不建议这样做。</p>
</blockquote>
<p>创建以后，会有管理员处理你的这个issue，等待管理员回复你的issue，他会告诉你，要在你的github创建一个repo，repo的名字是这个issue的id，比如我的是<strong>OSSRH-66052</strong>。管理员回复我的如下图：</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_replay.jpg" alt=""></p>
<p>你创建好repo后，回复管理员就好了，等待这个issue的状态变成<strong>RESOLVED</strong>状态。</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_resolved.jpg" alt=""></p>
<p>这样，你就创建好了一个issue，用来承接对应group id下所有的库。</p>
<h2 id="二gradle的准备">二、Gradle的准备</h2>
<p>在你项目根目录下的build.gradle文件添加classpath。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>buildscript <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    ext <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        kotlin_version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.4.31&#34;</span>
</span></span><span style="display:flex;"><span>        appcompat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.2.0&#34;</span>
</span></span><span style="display:flex;"><span>        dokka_version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;1.4.10.2&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    repositories <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        google<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>        mavenCentral<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    dependencies <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        classpath <span style="color:#e6db74">&#39;com.android.tools.build:gradle:4.1.3&#39;</span>
</span></span><span style="display:flex;"><span>        classpath <span style="color:#e6db74">&#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        classpath <span style="color:#e6db74">&#34;org.jetbrains.dokka:dokka-gradle-plugin:$dokka_version&#34;</span> <span style="color:#75715e">//新添加的这一classpath
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>在你要提交的module下的build.gradle文件中，尾部追加如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>ext <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    PUBLISH_ARTIFACT_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;你的artifact_id，一般是module的名字&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>apply from: <span style="color:#e6db74">&#39;../publish.gradle&#39;</span>
</span></span></code></pre></div><p>在根目录下创建publish.gradle，如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>apply plugin: <span style="color:#e6db74">&#39;maven-publish&#39;</span>
</span></span><span style="display:flex;"><span>apply plugin: <span style="color:#e6db74">&#39;signing&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>task <span style="color:#a6e22e">androidSourcesJar</span><span style="color:#f92672">(</span>type: Jar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    classifier <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;sources&#39;</span>
</span></span><span style="display:flex;"><span>    from android<span style="color:#f92672">.</span><span style="color:#a6e22e">sourceSets</span><span style="color:#f92672">.</span><span style="color:#a6e22e">main</span><span style="color:#f92672">.</span><span style="color:#a6e22e">java</span><span style="color:#f92672">.</span><span style="color:#a6e22e">source</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    exclude <span style="color:#e6db74">&#34;**/R.class&#34;</span>
</span></span><span style="display:flex;"><span>    exclude <span style="color:#e6db74">&#34;**/BuildConfig.class&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ext <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    PUBLISH_GROUP_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的group_id&#39;</span>
</span></span><span style="display:flex;"><span>    PUBLISH_VERSION <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的版本号&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ext<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;signing.keyId&#34;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>ext<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;signing.password&#34;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>ext<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;signing.secretKeyRingFile&#34;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>ext<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;ossrhUsername&#34;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>ext<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;ossrhPassword&#34;</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File secretPropsFile <span style="color:#f92672">=</span> project<span style="color:#f92672">.</span><span style="color:#a6e22e">rootProject</span><span style="color:#f92672">.</span><span style="color:#a6e22e">file</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;local.properties&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>secretPropsFile<span style="color:#f92672">.</span><span style="color:#a6e22e">exists</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    println <span style="color:#e6db74">&#34;Found secret props file, loading props&#34;</span>
</span></span><span style="display:flex;"><span>    Properties p <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>    p<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span>secretPropsFile<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>    p<span style="color:#f92672">.</span><span style="color:#a6e22e">each</span> <span style="color:#f92672">{</span> name<span style="color:#f92672">,</span> value <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        ext<span style="color:#f92672">[</span>name<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> value
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    println <span style="color:#e6db74">&#34;No props file, loading env vars&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>publishing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    publications <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        release<span style="color:#f92672">(</span>MavenPublication<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// The coordinates of the library, being set from variables that
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// we&#39;ll set up in a moment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            groupId PUBLISH_GROUP_ID
</span></span><span style="display:flex;"><span>            artifactId PUBLISH_ARTIFACT_ID
</span></span><span style="display:flex;"><span>            version PUBLISH_VERSION
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Two artifacts, the `aar` and the sources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            artifact<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;$buildDir/outputs/aar/${project.getName()}-release.aar&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>            artifact androidSourcesJar
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Self-explanatory metadata for the most part
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            pom <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                name <span style="color:#f92672">=</span> PUBLISH_ARTIFACT_ID
</span></span><span style="display:flex;"><span>                description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的项目描述&#39;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// If your project has a dedicated site, use its URL here
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://github.com/boybeak/EasyPack&#39;</span>
</span></span><span style="display:flex;"><span>                licenses <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    license <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">//协议类型，一般默认Apache License2.0的话不用改：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                        name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;The Apache License, Version 2.0&#39;</span>
</span></span><span style="display:flex;"><span>                        url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://www.apache.org/licenses/LICENSE-2.0.txt&#39;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                developers <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    developer <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的sonatype用户名&#39;</span>
</span></span><span style="display:flex;"><span>                        name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的sonatype用户名&#39;</span>
</span></span><span style="display:flex;"><span>                        email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;你的sonatype注册邮箱&#39;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Version control info, if you&#39;re using GitHub, follow the format as seen here
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                scm <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//修改成你的Git地址：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    connection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;scm:git:github.com/你的github账号/你的项目名称.git&#39;</span>
</span></span><span style="display:flex;"><span>                    developerConnection <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;scm:git:ssh://github.com/你的github账号/你的项目名称.git&#39;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//分支地址：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://github.com/你的github账号/你的项目名称/tree/master&#39;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// A slightly hacky fix so that your POM will include any transitive dependencies
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#75715e">// that your library builds upon
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                withXml <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">def</span> dependenciesNode <span style="color:#f92672">=</span> asNode<span style="color:#f92672">().</span><span style="color:#a6e22e">appendNode</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;dependencies&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    project<span style="color:#f92672">.</span><span style="color:#a6e22e">configurations</span><span style="color:#f92672">.</span><span style="color:#a6e22e">implementation</span><span style="color:#f92672">.</span><span style="color:#a6e22e">allDependencies</span><span style="color:#f92672">.</span><span style="color:#a6e22e">each</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">def</span> dependencyNode <span style="color:#f92672">=</span> dependenciesNode<span style="color:#f92672">.</span><span style="color:#a6e22e">appendNode</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;dependency&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                        dependencyNode<span style="color:#f92672">.</span><span style="color:#a6e22e">appendNode</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;groupId&#39;</span><span style="color:#f92672">,</span> it<span style="color:#f92672">.</span><span style="color:#a6e22e">group</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                        dependencyNode<span style="color:#f92672">.</span><span style="color:#a6e22e">appendNode</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;artifactId&#39;</span><span style="color:#f92672">,</span> it<span style="color:#f92672">.</span><span style="color:#a6e22e">name</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                        dependencyNode<span style="color:#f92672">.</span><span style="color:#a6e22e">appendNode</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;version&#39;</span><span style="color:#f92672">,</span> it<span style="color:#f92672">.</span><span style="color:#a6e22e">version</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    repositories <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// The repository to publish to, Sonatype/MavenCentral
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        maven <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// This is an arbitrary name, you may also use &#34;mavencentral&#34; or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// any other name that&#39;s descriptive for you
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mavencentral&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">def</span> releasesRepoUrl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://oss.sonatype.org/service/local/staging/deploy/maven2/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">def</span> snapshotsRepoUrl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://oss.sonatype.org/content/repositories/snapshots/&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// You only need this if you want to publish snapshots, otherwise just set the URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// to the release repo directly
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            url <span style="color:#f92672">=</span> version<span style="color:#f92672">.</span><span style="color:#a6e22e">endsWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;SNAPSHOT&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">?</span> snapshotsRepoUrl <span style="color:#f92672">:</span> releasesRepoUrl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// The username and password we&#39;ve fetched earlier
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            credentials <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                username ossrhUsername
</span></span><span style="display:flex;"><span>                password ossrhPassword
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>signing <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    sign publishing<span style="color:#f92672">.</span><span style="color:#a6e22e">publications</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h2 id="三创建gpg秘钥">三、创建GPG秘钥</h2>
<ol>
<li>
<p><a href="https://www.gnupg.org/download/">https://www.gnupg.org/download/</a>，从这里下载并安装GPG客户端。</p>
</li>
<li>
<p>在命令行中执行命令<code>gpg --full-gen-key</code>，注意，一定要在命令行中执行命令，不能在客户端界面做。</p>
</li>
<li>
<p>加密方式选择<strong>RSA and RSA</strong>，长度输入<strong>4096</strong>，过期时间直接回车不用管，然后输入一个user ID并且提供一个邮箱，我直接用的我sonatype的用户名和邮箱。最后一步输入&rsquo;O&rsquo;，表示OK。</p>
</li>
<li>
<p>之后会弹出一个对话框，让输入密码。</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_pwd.png" alt="密码"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gpg: revocation certificate stored as <span style="color:#e6db74">&#39;~/.gnupg/openpgp-revocs.d/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXE478F7CC.rev&#39;</span>
</span></span><span style="display:flex;"><span>public and secret key created and signed.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pub   rsa4096 2021-03-22 <span style="color:#f92672">[</span>SC<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXEE478F7CC
</span></span><span style="display:flex;"><span>uid                      boybeak &lt;boybeak@gmail.com&gt;
</span></span><span style="display:flex;"><span>sub   rsa4096 2021-03-22 <span style="color:#f92672">[</span>E<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>这会为你在<code>~/.gnupg/openpgp-revocs.d/</code>目录下创建一个.rev文件，记住pub的末尾8位。</p>
</li>
<li>
<p>接下来创建secring.gpg文件，命令行执行<code>gpg --export-secret-keys -o secring.gpg</code>，这会要求你输入在步骤4中设置的密码，在你用户根目录下会出现secring.gpg文件。</p>
</li>
<li>
<p>回到gpg客户端，选择我们刚生成的秘钥条目，右键，选择<code>Send Public Key to Key Server</code>。</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_cer_push.png" alt=""></p>
</li>
</ol>
<h2 id="四设置localproperties">四、设置local.properties</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>signing<span style="color:#f92672">.</span><span style="color:#a6e22e">keyId</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">刚才获取的秘钥后</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">位</span>
</span></span><span style="display:flex;"><span>signing<span style="color:#f92672">.</span><span style="color:#a6e22e">password</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">步骤</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">中设置的密码</span>
</span></span><span style="display:flex;"><span>signing<span style="color:#f92672">.</span><span style="color:#a6e22e">secretKeyRingFile</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">刚才生成的</span>secring<span style="color:#f92672">.</span><span style="color:#a6e22e">gpg文件目录</span>
</span></span><span style="display:flex;"><span>ossrhUsername<span style="color:#f92672">=</span>sonatype用户名
</span></span><span style="display:flex;"><span>ossrhPassword<span style="color:#f92672">=</span>sonatype密码
</span></span></code></pre></div><h2 id="五执行打包和上传">五、执行打包和上传</h2>
<p>设置完这些后，在AndroidStudio右侧的gradle tasks中找到你想提交的module，先后执行以下两个任务。</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_build_push.jpg" alt=""></p>
<p>上传成功后，打开<a href="https://oss.sonatype.org/">Nexus Repository Manager</a>，登录你的sonatype账号，在左侧<code>Staging Repositories</code>页面找到你的group id，选中，点击上边的close，等待几分钟十几分钟后刷新状态，等其状态变为closed后，再点击Release，则所有人都用使用你的库了。</p>
<p><img src="%7B%7Bbase_url%7D%7D/assets/images/mc_publish.jpg" alt="">。</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]"
      href="https://boybeak.github.io/tags/untagged"
      >untagged</a
    >
    
  </footer>
  

  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a class="flex w-1/2 items-center p-6 pr-3 no-underline" href="https://boybeak.github.io/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/mvp/"
      ><span class="mr-1.5">←</span><span>MVP究极进化</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline"
      href="https://boybeak.github.io/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/mvvm/"
      ><span></span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  

  
  
  <div id="disqus_thread"></div>
  <script>
    const disqusShortname = 'YOUR_DISQUS_SHORTNAME';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  
</article>


    </main>

    <footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60">
  <div class="mr-auto">
    &copy; 2022
    <a class="link" href="https://boybeak.github.io/">My New Hugo Site</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank">Powered by Hugo️️</a
  >️
  <a class="link" href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank"
    >▷ Paper 6</a
  >
</footer>

  </body>
</html>
